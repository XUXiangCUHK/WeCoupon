<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link rel="stylesheet" href="../static/css/teacher_collect_answer.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.0.2/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.dev.js"></script>
    <script src="../static/js/teacher_view_answer.js"></script>
    <title>Teacher collect answers</title>
</head>
<body>

    <section id="banner">
      <div class="container">
        <div class="row inner">
            <div>
                <a href="#" class="btn btn-outline-light btn-lg" style="float: right;">
                  <span class="glyphicon glyphicon-log-out"></span> Log out
                </a>
            </div>
            <div class="row">
                <h1>Coupon Competition for {{ current_user.current_q.q_title }}</h1>
                <h2>Course - {{ current_user.current_course.course_code }} {{ current_user.current_course.course_name }} </h2>
            </div>
            <div class="row col-3">
                <a href="../teacher_view_answer/{{ current_user.current_q.q_id }}" type="button" class="button default">Stop collecting</a>
                <br>
                <a href="../teacher_within_course/{{ current_user.current_course.course_id }}" type="button" class="button default">Back to question list</a>
            </div>
        </div>
      </div>        
    </section>

    <div class="container">
        <h3 class="boxtitle" style="background-color:aquamarine;">Please read the following question and give your brief answer.</h3>
        {{current_user.current_q.q_content}}
    </div>

    <div class="container" style="margin-top:30px">
        <div class="row">
            <div class="col-sm-6" >
                <h3 class="boxtitle" style="background-color:lavender;">Students' Answers</h3>

                <table class="table">
                    <thead>
                        <tr>
                        <th style="width:15%">Student</th>
                        <th style="width:60%">Answer</th>
                        <th style="width:25%">Coupon <br> Rewarding</th>
                        </tr>
                    </thead>
                
                    
                    <tbody id="answerList">
                    {% for item in answer_list %}
                        <tr>
                            <td style="width:15%">{{ item["answer_user"] }}</td>
                            <td style="width:60%">{{ item["answer_content"] }}</td>
                            <!-- <td><a href="../add_coupon/{{ item.answer_userid }}" class="button btn btn-primary" onclick="{if(confirm('Are you sure to reward coupon to {{ item.answer_user }}?')){return true;}return false;}">Reward</a></td> -->
                            <td style="width:25%"><input type="button" class="btn btn-primary" value="Reward" onclick="reward(this, '{{ item['answer_userid'] }}', '{{ item['answer_user'] }}')"></input></td>   
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>

            </div>
            <!--div class="col-sm-6" >
                <h3 class="boxtitle" style="background-color:lavenderblush;">Statistics</h3>
                <div id="percentageAnswering" style="width:100%; height:500px;"></div>
                <script type="text/javascript">
                    var myChart = echarts.init(document.getElementById('percentageAnswering'));

                    var option = {
                        title: {
                            text: 'Participation Rate',
                            x: 'center',
                            y: 'top'
                        },
                        series: [{
                            name: 'percent',
                            type: 'pie',
                            radius: '80%',
                            data: [{value:`{{ per_ans['answered'] }}`, name:'Answered'},
                                    {value:`{{ per_ans['not_answered'] }}`, name:'Not Answered'}],
                            label: {
                                normal: {
                                position: 'inner',
                                formatter: '{b}: {c} ({d}%)'
                                }
                            }
                        }]
                    };

                    myChart.setOption(option);
                </script>
            </div-->
        </div>
    </div>

    <!-- Update without refreashing page
    <div>

        <h2 id="t"></h2>

        <script type="text/javascript">
            $(document).ready(function() {
                namespace = '/teacher_collect_answer';
                var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port + namespace);
                socket.on('server_response', function(res) {
                    var t = res.data2;
                    $("#t").text(t);
                    console.log(t)
                });
            });
        </script>
    </div> -->
    
    
</body>
<script src="../static/js/teacher_view_answer.js"></script>
</html>
